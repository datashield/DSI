<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Data aggregation — datashield.aggregate • DSI</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Data aggregation — datashield.aggregate"><meta property="og:description" content="Aggregates the expression result using the specified aggregation method in the current Datashield session."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DSI</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/datashield/DSI/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Data aggregation</h1>
    <small class="dont-index">Source: <a href="https://github.com/datashield/DSI/blob/HEAD/R/datashield.aggregate.R" class="external-link"><code>R/datashield.aggregate.R</code></a></small>
    <div class="hidden name"><code>datashield.aggregate.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Aggregates the expression result using the specified aggregation method in the current Datashield session.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">datashield.aggregate</span><span class="op">(</span><span class="va">conns</span>, <span class="va">expr</span>, async <span class="op">=</span> <span class="cn">TRUE</span>, success <span class="op">=</span> <span class="cn">NULL</span>, error <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>conns</dt>
<dd><p><code><a href="DSConnection-class.html">DSConnection-class</a></code> object or a list of <code><a href="DSConnection-class.html">DSConnection-class</a></code>s.</p></dd>


<dt>expr</dt>
<dd><p>Expression to evaluate.</p></dd>


<dt>async</dt>
<dd><p>Whether the result of the call should be retrieved asynchronously. When TRUE (default) the calls are parallelized over
the connections, when the connection supports that feature, with an extra overhead of requests.</p></dd>


<dt>success</dt>
<dd><p>Callback function that will be called each time an aggregation result is received from a connection. 
The expected function signature is the connection/study name and the result value. Default is NULL (no callback).</p></dd>


<dt>error</dt>
<dd><p>Callback function that will be called each time the aggregation request has failed. 
The expected function signature is the connection/study name and the error message. Default is NULL (no callback).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The result of the aggregation</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co"># call aggregate function on server side asynchronously</span></span>
<span class="r-in"><span class="co"># i.e. each study connection will process the request in parallel</span></span>
<span class="r-in"><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">datashield.aggregate</span><span class="op">(</span><span class="va">conns</span>, expr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="fu">someFunction</span><span class="op">(</span><span class="va">D</span>, <span class="fl">123</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># call aggregate function on server side synchronously, i.e. each study </span></span>
<span class="r-in"><span class="co"># connection will be called, one after the other, in a blocking way </span></span>
<span class="r-in"><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">datashield.aggregate</span><span class="op">(</span><span class="va">conns</span>, expr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="fu">someFunction</span><span class="op">(</span><span class="va">D</span>, <span class="fl">123</span><span class="op">)</span><span class="op">)</span>, async <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># call aggregate functions that are defined in the provided named list. </span></span>
<span class="r-in"><span class="co"># Connections are filtered by the list names.</span></span>
<span class="r-in"><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">datashield.aggregate</span><span class="op">(</span><span class="va">conns</span>,</span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>server1<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="fu">someFunction</span><span class="op">(</span><span class="va">D</span>, <span class="fl">123</span><span class="op">)</span><span class="op">)</span>, server2<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="fu">someFunction</span><span class="op">(</span><span class="va">G</span>, <span class="fl">456</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># call aggregate function with callback functions</span></span>
<span class="r-in"><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">datashield.aggregate</span><span class="op">(</span><span class="va">conns</span>, expr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="fu">someFunction</span><span class="op">(</span><span class="va">D</span>, <span class="fl">123</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">  success <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">server</span>, <span class="va">res</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in">    <span class="co"># do something with server's result value</span></span>
<span class="r-in">  <span class="op">}</span>,</span>
<span class="r-in">  error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">server</span>, <span class="va">error</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in">    <span class="co"># do something with server's error message</span></span>
<span class="r-in">  <span class="op">}</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Yannick Marcon.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

